" author: yantze
" $VIMHOME/vimrc.bundles " the package location
" let g:color_dark = 1
" let g:no_compile_plugin = 1
" let g:no_vimrc_bundles = 1

" General {

" Enviroment {

    " Basic
    let mapleader=","
    " Âú®‰πãÂâçÁî® <leader> ‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑ'\'
    map ; :

    " ÂÖ±‰∫´Á≥ªÁªüÁ≤òË¥¥Êùø
    if has('clipboard')
        if has('unnamedplus')  " When possible use + register for copy-paste
            set clipboard=unnamed,unnamedplus
        else
            " On mac and Windows, use * register for copy-paste
            set clipboard=unnamed
        endif
    endif

    " Platform Check
    silent function! OSX()
        return system('uname')=~'Darwin'
    endfunction
    silent function! LINUX()
        return has('unix') && !has('macunix') && !has('win32unix')
    endfunction
    silent function! WINDOWS()
        return  (has('win16') || has('win32') || has('win64'))
    endfunction

    " Áªü‰∏ÄÂèòÈáè
    if WINDOWS()
        let $VIMHOME = $HOME."\\vimfiles" " C:\Users\User\vimfiles
        let $VIMRC = $MYVIMRC
        " set runtimepath=$HOME.'\.vim',$VIM.'\vimfiles',$VIMRUNTIME
    else
        let $VIMHOME = $HOME."/.vim"
        let $VIMRC = $MYVIMRC
        " set shell=/bin/sh
    endif

    " Package Manager
    " ÂÆâË£ÖÊèí‰ª∂ :PlugInstall
    if !exists("g:no_vimrc_bundles") && !empty(glob("$VIMHOME/vimrc.bundles"))
        source $VIMHOME/vimrc.bundles
    endif

    " Adapte with putty because of putty only support the 7 character
    " if $TERM == 'screen'
        " http://vim.wikia.com/wiki/Get_Alt_key_to_work_in_terminal
        " set <m-j>=j
        " set <m-h>=h
        " set <m-k>=k
        " set <m-l>=l
        "
        " https://groups.google.com/forum/#!topic/vim_use/uKOmY-mHo_k
        " ÂØºËá¥ ESC Âª∂ËøüÂèçÂ∫î
        " below set <esc> wait the next key millionstime
        " set timeout timeoutlen=3000 ttimeoutlen=100

        " Ëøô‰∏™ËÆ© alt work in putty ÁöÑÊñπÊ≥ïÂΩ±Âìç‰∫ÜÂÖ∂ÂÆÉÂπ≥Âè∞ÁöÑ‰ΩøÁî®ÔºåÁ¶ÅÁî®
    " endif
    " the ^[ is an Esc char that comes before the 'a'
    " In most default configs, ^[a may be typed by pressing first <C-v>, then <M-a>

    " http://vim.1045645.n5.nabble.com/Mapping-meta-key-within-tmux-td5716437.html
    " Fix screen's key bindings.
    " if &term == "screen"
    "     " These work from my HP keyboard in PuTTY on Windows XP.
    "     map <Esc>[D   <S-Left>
    "     map <Esc>[C   <S-Right>
    "     map <Esc>[11~ <F1>
    "     map <Esc>[12~ <F2>
    "     map <Esc>[13~ <F3>
    "     map <Esc>[14~ <F4>
    "     map <Esc>[15~ <F5>
    "     map <Esc>[16~ <F6>
    "     map <Esc>[17~ <F7>
    "     map <Esc>[18~ <F8>
    "     map <Esc>[19~ <F9>
    "     map <Esc>[21~ <F10
    "     map <Esc>[23~ <F11>
    "     map <Esc>[24~ <F12>
    " endif

    " if &term=="xterm"
    "     set t_Co=8
    "     set t_Sb=[4%dm
    "     set t_Sf=[3%dm
    " endif

" }

" Functions {

    " there func is for internal function invoal
    " not relate the other plugin

    func! CopyToCloud()
        exec ":w !tee | xcopy"
        " https://github.com/yantze/dotfiles/blob/master/usrbin/xcopy
    endfunc

    func! CopySelectedToCloud()
        exec ":'<,'>:w !tee | xcopy"
    endfunc

    func! RunSelected()
        exec ":s/\%V\(.*\)/{{__ "\1"}}/"
    endfunc

    func! PasteFromCloud()
    endfunc

    func! s:get_visual_selection()
        " https://stackoverflow.com/questions/1533565/how-to-get-visually-selected-text-in-vimscript
        let [line_start, column_start] = getpos("'<")[1:2]
        let [line_end, column_end] = getpos("'>")[1:2]
        let lines = getline(line_start, line_end)
        if len(lines) == 0
            return ''
        endif
        let lines[-1] = lines[-1][: column_end - (&selection == 'inclusive' ? 1 : 2)]
        let lines[0] = lines[0][column_start - 1:]
        return join(lines, "\n")
    endfunc


    func! RemoveTabs()
        if &shiftwidth == 2
            exec "%s/	/  /g"
        elseif &shiftwidth == 4
            exec "%s/	/    /g"
        elseif &shiftwidth == 6
            exec "%s/	/      /g"
        elseif &shiftwidth == 8
            exec "%s/	/        /g"
        else
            exec "%s/	/    /g"
        end
    endfunc

    func! RemoveQuotas()
        silent! exec "%s/[‚Äú‚Äù]/\"/g"
        silent! exec "%s/[‚Äò‚Äô]/\'/g"
    endfunc

    func! Tab2()
        set tabstop=2
        set shiftwidth=2
        set softtabstop=2
    endfunc

    func! Tab4()
        " tab ÈîÆÂÆΩÂ∫¶‰∏∫4Á©∫Ê†º
        set tabstop=4
        " ÊØè‰∏ÄÊ¨°Áº©ËøõÂØπÂ∫îÁöÑÁ©∫Ê†ºÊï∞
        set shiftwidth=4
        " ÊåâÈÄÄÊ†ºÈîÆÂèØ‰ª•‰∏ÄÊ¨°Âà†Êéâ4‰∏™Á©∫Ê†º
        set softtabstop=4
    endfunc

    " Diff current unsaved file
    function! s:DiffWithSaved()
        let filetype=&ft
        diffthis
        vnew | r # | normal! 1Gdd
        diffthis
        exe "setlocal bt=nofile bh=wipe nobl noswf ro ft=" . filetype
    endfunction


    " ÁºñËØëÂπ∂ËøêË°å
    func! Compile_Run_Code()
        exec "w"
        if &filetype == "c"
            if WINDOWS()
                exec !gcc -Wall -std=c11 -o %:r %:t && %:r.exe"
            else
                exec "!clang -Wall -std=c11 -o %:r %:t && ./%:r"
                " exec "!gcc -Wall -o %:r %:t && ./%:r"
            endif
        elseif &filetype == "cpp"
            if WINDOWS()
                exec "!g++ -Wall -std=c++11 -o %:r %:t && %:r.exe"
            else
                " exec "!g++ -Wall -std=c++11 -o %:r %:t && ./%:r"
                exec "!clang++ -Wall -std=c++11 `pkg-config --cflags --libs opencv`  -o %:r %:t && ./%:r"
                " -ggdb " add gdb support
            endif
        elseif &filetype == "d"
            if WINDOWS()
                exec "!dmd -wi %:t && %:r.exe"
            else
                exec "!dmd -wi %:t && ./%:r"
            endif
        elseif &filetype == "go"
            exec "!go run %:t"
        elseif &filetype == "rust"
            if WINDOWS()
                exec "!rustc %:t && %:r.exe"
            else
                exec "!rustc %:t && ./%:r"
            endif
        elseif &filetype == "java"
            exec "!javac %:t && java %:r"
        elseif &filetype == "groovy"
            exec "!groovy %:t"
        elseif &filetype == "scala"
            exec "!scala %:t"
        elseif &filetype == "clojure"
            exec "!clojure -i %:t"
        elseif &filetype == "cs"
                exec "!mcs %:t && mono %:r.exe"
        elseif &filetype == "fsharp"
            if WINDOWS()
                exec "!fsc %:t && %:r.exe"
            else
                exec "!fsharpc %:t && ./%:r.exe"
            endif
        elseif &filetype == "scheme" || &filetype == "racket"
            exec "!racket -fi %:t"
        elseif &filetype == "lisp"
            exec "!sbcl --load %:t"
        elseif &filetype == "ocaml"
            if WINDOWS()
                exec "!ocamlc -o %:r.exe %:t && %:r.exe"
            else
                exec "!ocamlc -o %:r %:t && ./%:r"
            endif
        elseif &filetype == "haskell"
            if WINDOWS()
                exec "!ghc -o %:r %:t && %:r.exe"
            else
                exec "!ghc -o %:r %:t && ./%:r"
            endif
        elseif &filetype == "lua"
            exec "!lua %:t"
        elseif &filetype == "perl"
            exec "!perl %:t"
        elseif &filetype == "php"
            exec "!php %:t"
        elseif &filetype == "python"
            exec "!python3 %:t"
        elseif &filetype == "ruby"
            exec "!ruby %:t"
        elseif &filetype == "elixir"
            exec "!elixir %:t"
        elseif &filetype == "julia"
            exec "!julia %:t"
        elseif &filetype == "dart"
            exec "!dart %:t"
        elseif &filetype == "haxe"
            exec "!haxe -main %:r --interp"
        elseif &filetype == "r"
            exec "!Rscript %:t"
        elseif &filetype == "coffee"
            exec "!coffee -c %:t && node %:r.js"
        elseif &filetype == "ls"
            exec "!lsc -c %:t && node %:r.js"
        elseif &filetype == "typescript"
            exec "!tsc %:t && node %:r.js"
        elseif &filetype == "javascript"
            " exec "!node --experimental-modules  %:t"
            exec "!node %:t"
        elseif &filetype == "sh"
            exec "!bash %:t"
        elseif &filetype == "applescript"
            exec "!osascript %:t"
        endif
    endfunc

    " ÁîüÊàêcscopeÂíåtagsÊñá‰ª∂
    function! Do_CsTag()
        let dir = getcwd()
        if filereadable("tags")
            if WINDOWS()
                let tagsdeleted=delete(dir."\\"."tags")
            else
                let tagsdeleted=delete("./"."tags")
            endif
            if(tagsdeleted!=0)
                echohl WarningMsg | echo "Fail to do tags! I cannot delete the tags" | echohl None
                return
            endif
        endif
        if has("cscope")
            silent! execute "cs kill -1"
        endif
        if filereadable("cscope.files")
            if WINDOWS()
                let csfilesdeleted=delete(dir."\\"."cscope.files")
            else
                let csfilesdeleted=delete("./"."cscope.files")
            endif
            if(csfilesdeleted!=0)
                echohl WarningMsg | echo "Fail to do cscope! I cannot delete the cscope.files" | echohl None
                return
            endif
        endif
        if filereadable("cscope.out")
            if WINDOWS()
                let csoutdeleted=delete(dir."\\"."cscope.out")
            else
                let csoutdeleted=delete("./"."cscope.out")
            endif
            if(csoutdeleted!=0)
                echohl WarningMsg | echo "Fail to do cscope! I cannot delete the cscope.out" | echohl None
                return
            endif
        endif
        if(executable('ctags'))
            "silent! execute "!ctags -R --c-types=+p --fields=+S *"
            silent! execute "!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q ."
        endif
        if(executable('cscope') && has("cscope") )
            if WINDOWS()
                silent! execute "!find . -name '*.h' -o -name '*.c' -o -name '*.cpp' -o -name '*.java' -o -name '*.cs' > cscope.files"
            else
                silent! execute "!dir /s/b *.c,*.cpp,*.h,*.java,*.cs >> cscope.files"
            endif
            silent! execute "!cscope -b"
            execute "normal :"
            if filereadable("cscope.out")
                execute "cs add cscope.out"
            endif
        endif
    endfunction

    " Append modeline after last line in buffer.
    " Use substitute() instead of printf() to handle '%%s' modeline in LaTeX
    " files.
    function! AppendModeline()
        let l:modeline = printf(" vim: set ts=%d sw=%d tw=%d %set :",
                    \ &tabstop, &shiftwidth, &textwidth, &expandtab ? '' : 'no')
        let l:modeline = substitute(&commentstring, "%s", l:modeline, "")
        call append(line("$"), l:modeline)
    endfunction

    function! RemoveOldViewFiles()
        exe 'find '.$VIMHOME.'/view/* -mtime +90 -exec rm {} \;'
    endfunction

    function! SetCurLineNum()
        let g:nal_cur_line_num = line("v")
    endfunction

    function! AddLineNum()
        let num1 = line("v")
        let num2 = num1 - g:nal_cur_line_num + 1
        let num2 = " " . num2
        "echo num2
        return num2
    endfunction

    function! SetColorColumn()
        let col_num = virtcol(".")
        let cc_list = split(&cc, ',')
        if count(cc_list, string(col_num)) <= 0
            " cc(colorcolumn)ÈÄâÈ°πÈúÄË¶Åvim7.3‰ª•‰∏äÁâàÊú¨ÊâçÊîØÊåÅ.
            execute "set cc+=".col_num
        else
            execute "set cc-=".col_num
        endif
    endfunction

    " Remove trailing whitespace when writing a buffer, but not for diff files.
    " From: Vigil
    function! RemoveTrailingWhitespace()
        if &ft != "diff"
            let b:curcol = col(".")
            let b:curline = line(".")
            silent! %s/\(\[.*\]\[.*\]\)\s\+$/\1@@@@@@@@/
            silent! %s/\s\+$//
            silent! %s/\(\s*\n\)\+\%$//
            silent! %s/\(\[.*\]\[.*\]\)@@@@@@@@$/\1  /
            call cursor(b:curline, b:curcol)
        endif
    endfunction


    " Toggle to ZenMode
    " https://github.com/mmai/vim-zenmode/blob/master/plugin/zenmode.vim
    func! ZenMode()
        let g:zenmode_width = 100
        let s:sidebar = ( winwidth( winnr() ) - g:zenmode_width - 2 ) / 2
        " Create the left sidebar
        exec("silent leftabove " . s:sidebar . "vsplit new")
        setlocal noma
        setlocal nocursorline
        setlocal nonumber
        silent! setlocal norelativenumber
        setlocal statusline=%#LineNr#       " change statusline background color
        wincmd l
        " Create the right sidebar
        exec("silent rightbelow " . s:sidebar . "vsplit new")
        setlocal noma
        setlocal nocursorline
        setlocal nonumber
        silent! setlocal norelativenumber
        wincmd h

        " ÊääÂ∑¶ËæπÁöÑÂ∫ïÈÉ®Ê≥¢Êµ™Âè∑ÈöêËóè
        exec("hi NonText ctermfg=white")
        " ÂàÜÈöîËæπÊ°ÜÁöÑÈ¢úËâ≤
        exec("hi VertSplit ctermbg=white ctermfg=white")
        call NumberToggle()
    endfunc

" }

" }
" Setting {

" Basic {

    syntax enable                " ÊâìÂºÄËØ≠Ê≥ïÈ´ò‰∫Æ
    syntax on                    " ÂºÄÂêØÊñá‰ª∂Á±ªÂûã‰æ¶Êµã
    filetype indent on           " ÈíàÂØπ‰∏çÂêåÁöÑÊñá‰ª∂Á±ªÂûãÈááÁî®‰∏çÂêåÁöÑÁº©ËøõÊ†ºÂºè
    filetype plugin on           " ÈíàÂØπ‰∏çÂêåÁöÑÊñá‰ª∂Á±ªÂûãÂä†ËΩΩÂØπÂ∫îÁöÑÊèí‰ª∂
    filetype plugin indent on    " ÂêØÁî®Ëá™Âä®Ë°•ÂÖ®
    set visualbell t_vb=         " ÂÖ≥Èó≠visual bell/Â£∞Èü≥
    " set t_Co=256               " ËÆæÁΩÆÊñáÂ≠óÂèØ‰ª•ÊòæÁ§∫Â§öÂ∞ëÁßçÈ¢úËâ≤, ÂéÜÂè≤ÂéüÂõ†ÂèØËÉΩÊòØÊØî 8-bit Ëâ≤ÂΩ©Êõ¥Â∞ë, ÂèØËÉΩÊØî 8-bit ÁªàÁ´ØÊõ¥Êó©
    au GuiEnter * set t_vb=      " ÂÖ≥Èó≠beep/Â±èÈó™
    " set t_ti= t_te=            " ÈÄÄÂá∫ vim Âêé,vim ÁöÑÂÜÖÂÆπ‰ªçÊòæÁ§∫Âú®Â±èÂπï‰∏ä

    set backspace=2              " ËÆæÁΩÆÈÄÄÊ†ºÈîÆÂèØÁî®
    set ruler                    " Âè≥‰∏ãËßíÊòæÁ§∫ÂÖâÊ†á‰ΩçÁΩÆÁöÑÁä∂ÊÄÅË°å
    set hidden                   " ÂÖÅËÆ∏Âú®ÊúâÊú™‰øùÂ≠òÁöÑ‰øÆÊîπÊó∂ÂàáÊç¢ÁºìÂÜ≤Âå∫
    set laststatus=2             " ÂºÄÂêØÁä∂ÊÄÅÊ†è‰ø°ÊÅØ
    set cmdheight=2              " ÂëΩ‰ª§Ë°åÁöÑÈ´òÂ∫¶ÔºåÈªòËÆ§‰∏∫1ÔºåËøôÈáåËÆæ‰∏∫2
    " set bsdir=buffer           " ËÆæÂÆöÊñá‰ª∂ÊµèËßàÂô®ÁõÆÂΩï‰∏∫ÂΩìÂâçÁõÆÂΩï
    " set autochdir " sometimes can not work
    autocmd BufEnter * silent! lcd %:p:h
    set wildmenu                 " Âú®ÂëΩ‰ª§Ë°å‰∏ãÊòæÁ§∫ÂåπÈÖçÁöÑÂ≠óÊÆµÂà∞Áä∂ÊÄÅÊ†èÈáåÈù¢
    " set cursorcolumn           " Á™ÅÂá∫ÊòæÁ§∫ÂΩìÂâçÂàó
    set history=500              " keep 500 lines of command line history
    silent! set mouse=a          " ÂêØÁî®Èº†Ê†á

    set cursorline               " Á™ÅÂá∫ÊòæÁ§∫ÂΩìÂâçË°å
    " set tw=78                  "Ë∂ÖËøá80‰∏™Â≠óÁ¨¶Â∞±ÊäòË°å(textwrap)
    " set viminfo='20,\"50       " read/write a .viminfo file, don't store more than 50 lines of registers
    set display=lastline         " ‰∏çË¶ÅÊòæÁ§∫@@@@@
    " set conceallevel=2         " ÈöêËóèÊÉ≥Ë¶ÅÈöêËóèÁöÑÂ≠óÁ¨¶
    " set fillchars+=vert:\      " ËÆæÁΩÆ split bar ÁöÑÂÜÖÂÆπÂ≠óÁ¨¶
    " set foldcolumn=2           " Â∑¶‰æßÁ™óËæπÁöÑÂÆΩÂ∫¶

    " ÂÖâÊ†áÁöÑ‰∏ä‰∏ãÊñπËá≥Â∞ë‰øùÁïôÊòæÁ§∫ÁöÑË°åÊï∞
    set scrolloff=5

    set showmatch                " ÊòæÁ§∫Êã¨Âè∑ÈÖçÂØπÊÉÖÂÜµ

    " set lsp=0                  " ËÆæÁΩÆË°åÈó¥Ë∑ù

    " => Modify word boundary characters
    " insert schema, ctrl+w and other keys likes emacs
    set iskeyword+=- " remove - as a word boundary
    set iskeyword+=$

" }

" Êñá‰ª∂ÈÖçÁΩÆ {
    if has("multi_byte")
        set fo+=mB " formatoptions ÊâìÂºÄÊñ≠Ë°åÊ®°ÂùóÂØπ‰∫öÊ¥≤ËØ≠Ë®ÄÊîØÊåÅ
        " if v:lang =~? '^\(zh\)\|\(ja\)\|\(ko\)'
        "     set ambiwidth=double " Ëá™Âä®Áî®ÂÆΩÂ≠óÁ¨¶ÊòæÁ§∫(Â¶ÇÊûúÂÖ®ËßíÂ≠óÁ¨¶‰∏çËÉΩËØÜÂà´)
        " endif
    endif


    " Áõ∏ÂØπË°åÂè∑ {

    if v:version > 703
        set relativenumber number
        " ÊèíÂÖ•Ê®°Âºè‰∏ãÁî®ÁªùÂØπË°åÂè∑,ÊôÆÈÄöÊ®°Âºè‰∏ãÁî®Áõ∏ÂØπ
        " augroup numbertoggle
        "     autocmd!
        "     autocmd BufEnter,FocusGained,InsertLeave * set relativenumber " nonumber
        "     autocmd BufLeave,FocusLost,InsertEnter   * set norelativenumber number
        " augroup END

        function! NumberToggle()
            if(&relativenumber == 1)
                set norelativenumber nonumber
            else
                set relativenumber number
            endif
        endfunc
        nnoremap <F2> :call NumberToggle()<cr>

        " no num and relative
        " nnoremap <leader><F3> :set relativenumber!<CR>:set nu!<CR>
        " imap <leader><F3>     :set relativenumber!<CR>:set nu!<CR>
    endif

    " }


    set list                     " ÊòæÁ§∫ÁâπÊÆäÂ≠óÁ¨¶ÔºåÂÖ∂‰∏≠Tab‰ΩøÁî®È´ò‰∫ÆÁ´ñÁ∫ø‰ª£ÊõøÔºåÂ∞æÈÉ®Á©∫ÁôΩ‰ΩøÁî®È´ò‰∫ÆÁÇπÂè∑‰ª£Êõø
    " set showbreak=‚Ü™\           " ÊòæÁ§∫Êç¢Ë°åÂêéÊñ∞Ë°åÁöÑÈ¶ñÂ≠óÁ¨¶
    set listchars=tab:‚Üí\ ,extends:‚Ä∫,precedes:‚Äπ,nbsp:‚ê£,trail:¬∑
    " set listchars=tab:\|\ ,trail:. " ËÆæÁΩÆtab/Â∞æÈÉ®Â≠óÁ¨¶Áî®‰ªÄ‰πàÂ°´ÂÖÖ

    " set fileformats=unix                           " ËÆæÂÆöÊç¢Ë°åÁ¨¶
    set wrap
    set linebreak                                    " Ëá™Âä®Êñ≠Ë°å, Áî® breakat ÊéßÂà∂
    set enc=utf-8                                    " ËÆæÁΩÆÁºñÁ†Å
    " set fenc=utf-8                                   " ËÆæÁΩÆÊñá‰ª∂ÁºñÁ†Å
    set fencs=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936 " ËÆæÁΩÆÊñá‰ª∂ÁºñÁ†ÅÊ£ÄÊµãÁ±ªÂûãÂèäÊîØÊåÅÊ†ºÂºè
    set shortmess+=filmnrxoOtT                       " Abbrev. of messages (avoids 'hit enter')
    set viewoptions=folds,options,cursor,unix,slash  " Better Unix / Windows compatibility
    " set virtualedit=onemore                          " Allow for cursor beyond last character

    set autoread                 " ÂΩìÊñá‰ª∂Âú®Â§ñÈÉ®Ë¢´‰øÆÊîπÊó∂Ëá™Âä®Êõ¥Êñ∞ËØ•Êñá‰ª∂
    set writebackup              " Make a backup before overwriting a file. The backup is removed after the file was successfully written, unless the 'backup' option is also on.
    set nobackup                 " ‰∏çÁîüÊàêÂ§á‰ªΩÊñá‰ª∂
    set noswapfile               " ‰∏çÁîüÊàê‰∫§Êç¢Êñá‰ª∂

    " restore last postion in file to $VIMHOME/view
    " ÊâìÂºÄËá™Âä®ÂÆö‰ΩçÂà∞ÊúÄÂêéÁºñËæëÁöÑ‰ΩçÁΩÆ, ÈúÄË¶ÅÁ°ÆËÆ§ .viminfo ÂΩìÂâçÁî®Êà∑ÂèØÂÜô
    au BufReadPost * if line("'\"") > 1 && line("'\"") <= line("$") | exe "normal! g'\"" | endif


    if v:version > 703
        set undofile " ÊåÅÁª≠‰øùÁïôÊìç‰ΩúËÆ∞ÂΩï,ÈªòËÆ§filename.un~, valid feature for `vim --version` have +persistent_undo
        if empty(glob("$VIMHOME/_undodir"))
            call mkdir(expand("$VIMHOME/_undodir"))
        endif
        set undodir=$VIMHOME/_undodir
        set undolevels=1000  " maximum number of changes that can be undone"
    endif


    " if !exists("g:no_vimrc_bundles")
        " Áî±‰∫é‰∏çÂêåÁâàÊú¨ÁöÑ vim ÂØºËá¥ mkview Âá∫Áé∞Ë∂äÊù•Ë∂äÂ§öÈóÆÈ¢òÔºåÂºÉÁî®
        " autocmd BufWinLeave *.* if expand('%') != '' && &buftype == '' | mkview | endif
        " autocmd BufRead     *.* if expand('%') != '' && &buftype == '' | silent loadview | endif
        " *.* is better for me than using just *, as when I load Vim it defaults to [No File]
        " au BufWinLeave ?* silent mkview 1 " ÊòüÂè∑ÂâçÈù¢ÁöÑÈóÆÂè∑ÊòØÂøΩÁï•Êú™ÂëΩÂêçÊñá‰ª∂
        " Áä∂ÊÄÅ‰øùÂ≠òÂú® ~/.vim/view Êñá‰ª∂Â§π,Â¶ÇÊûú‰øùÂ≠ò‰∫Ü‰πãÂêé,‰øÆÊîπ‰∫Ü filetype ÁöÑ syntax Â±ûÊÄß,ÈúÄË¶ÅÂà†Èô§ view ÊâçËÉΩÊõ¥Êñ∞
    " endif
" }

" GUI & WIN {
" ËÆæÁΩÆÁùÄËâ≤Ê®°ÂºèÂíåÂ≠ó‰Ωì
if WINDOWS()
    " ‰ΩøÁî®GUIÁïåÈù¢Êó∂ÁöÑËÆæÁΩÆ
    if has("gui_running")
        " ÂêØÂä®gvimÊó∂Á™óÂè£ÁöÑÂ§ßÂ∞è
        " set lines=42 columns=170
        " ÂêØÂä®Êó∂Ëá™Âä®ÊúÄÂ§ßÂåñÁ™óÂè£
        " au GUIEnter * simalt ~x

        " winpos 20 20             " ÊåáÂÆöÁ™óÂè£Âá∫Áé∞ÁöÑ‰ΩçÁΩÆÔºåÂùêÊ†áÂéüÁÇπÂú®Â±èÂπïÂ∑¶‰∏äËßí
        " set lines=20 columns=90  " ÊåáÂÆöÁ™óÂè£Â§ßÂ∞èÔºålines‰∏∫È´òÂ∫¶Ôºåcolumns‰∏∫ÂÆΩÂ∫¶
        set guioptions+=c        " ‰ΩøÁî®Â≠óÁ¨¶ÊèêÁ§∫Ê°Ü
        set guioptions-=m        " ÈöêËóèËèúÂçïÊ†è
        set guioptions-=T        " ÈöêËóèÂ∑•ÂÖ∑Ê†è
        set guioptions-=L        " ÈöêËóèÂ∑¶‰æßÊªöÂä®Êù°
        set guioptions-=r        " ÈöêËóèÂè≥‰æßÊªöÂä®Êù°
        " set guioptions-=b        " ÈöêËóèÂ∫ïÈÉ®ÊªöÂä®Êù°
        " set showtabline=1        " ÈöêËóèTabÊ†è
        set guioptions+=aA       " get some autoselect interaction with the system clipboard

        " colortheme list: molokai autumn blackboard asu1dark busybee tomorrow
        " colorscheme solarized  " deep blue
        " colorscheme morning    " white
        " colorscheme desertEx

        " let g:zenburn_transparent = 1 " black
        let g:zenburn_high_Contrast = 1
        silent! colorscheme zenburn      " grey, my fav

        " set font
        " https://github.com/runsisi/consolas-font-for-powerline
        set guifont=Powerline\ Consolas:h11:cANSI,Consolas\ NF:h11:cANSI,Consolas:h11,Inconsolata:h12
        " https://gist.github.com/kevinis/c788f85a654b2d7581d8
        " set guifont=Monaco\ for\ Powerline:h12:cANSI
        set renderoptions=type:directx,renmode:5
        " set guifont=Monaco:h11
        " set guifont=Source\ Code\ Pro\ Regular:h15
        " set guifont=YaHei\ Consolas\ Hybrid:h13
        " set guifont=Source\ Code\ Pro:h13
    else
        silent! colorscheme CodeFactoryv3
        " colorscheme ir_black
        " ÂÖºÂÆπwindows‰∏ãcmdÁöÑgb2312
        " set enc=cp936
        " help encoding-table
        set termencoding=cp936
        " In order to reload a file with proper encoding you can do:
        " :e! ++enc=<the_encoding>.
        " dosÈáåÈù¢<backspace>Âíå<c-h>ÂÆåÂÖ®ÈìæÊé•‰∫ÜÔºåË¶ÅÂèñÊ∂à<c-h>ÁöÑÊò†Â∞Ñ
        iunmap <c-h>

    endif
else
    if has("gui_running")
        if has("gui_gtk2")
            set guioptions=egitcaA  " ‰∏éWindowsÁ±ª‰ºº"
            set guifont=Monaco\ 14
        elseif has("gui_macvim")
            set guifont=Monaco\ for\ Powerline:h12
            set guifontwide=HiraginoSansGB-W3:h12
            " set guifontwide=Go\ Mono\ for\ Powerline:h12
            set guioptions-=r        " ÈöêËóèÂè≥‰æßÊªöÂä®Êù°
            set guioptions-=L        " ÈöêËóèÂ∑¶‰æßÊªöÂä®Êù°
        end

        " set guifont=Monaco\ 13
        " set guifontwide=HiraginoSansGB-W3:h15
        " set guifont=YaHei\ Consolas\ Hybrid:h13
        set background=light
        silent! colorscheme solarized
        set lines=38 columns=140

        " Âú® macvim ‰∏≠Ôºå‰∏çÊîØÊåÅ
        " set nu!
    else
        silent! colorscheme solarized
        " let g:solarized_termcolors=256 " ÂÖ∂ÂÆûËøôÈáå256 ÊòØÊääÈ¢úËâ≤ÂáèÂ∞ë‰∫Ü
        let g:solarized_visibility="normal"
        let g:solarized_bold = 1

        if exists("g:color_dark")
            set background=dark
            let g:airline_theme='serene' " aireline dark theme
        else
            set background=light
        endif
        highlight LineNr ctermbg=none ctermfg=none " ËÆæÁΩÆË°åÂè∑ËÉåÊôØ‰∏∫ none
        if &background == 'light'
            hi CursorLine term=bold cterm=bold ctermbg=7 guibg=Grey90
            hi Folded term=bold,underline cterm=bold,underline ctermfg=11 ctermbg=7 guifg=DarkBlue guibg=LightGrey
        endif

        " highlight LineNr ctermbg=none ctermfg=grey " ËÆæÁΩÆË°åÂè∑ËÉåÊôØ‰∏∫ none
        " g:solarized_termcolors= 16 | 256
        " g:solarized_termtrans = 0 | 1
        " g:solarized_degrade = 0 | 1
        " g:solarized_bold = 1 | 0
        " g:solarized_underline = 1 | 0
        " g:solarized_italic = 1 | 0
        " g:solarized_contrast = ‚Äúnormal‚Äù| ‚Äúhigh‚Äù or ‚Äúlow‚Äù
        " g:solarized_visibility= ‚Äúnormal‚Äù| ‚Äúhigh‚Äù or ‚Äúlow‚Äù

        " colortheme list: ir_black grb256 BusyBee pt_black solarized xoria256
        " silent! colorscheme pt_black
    endif
endif

" pure vim {
    if get(g:, 'colors_name', 'default') == 'default'
        if &background == 'light'
            hi CursorLine term=bold cterm=bold ctermbg=7 guibg=Grey90
            hi Folded term=bold,underline cterm=bold,underline ctermfg=11 ctermbg=7 guifg=DarkBlue guibg=LightGrey
        endif
    endif
" }

" }

" ‰ª£Á†ÅÊäòÂè† {

    set foldenable
    " ÊäòÂè†ÊñπÊ≥ï
    " manual    ÊâãÂ∑•ÊäòÂè†
    " indent    ‰ΩøÁî®Áº©ËøõË°®Á§∫ÊäòÂè†
    " expr      ‰ΩøÁî®Ë°®ËææÂºèÂÆö‰πâÊäòÂè†
    " syntax    ‰ΩøÁî®ËØ≠Ê≥ïÂÆö‰πâÊäòÂè†
    " diff      ÂØπÊ≤°ÊúâÊõ¥ÊîπÁöÑÊñáÊú¨ËøõË°åÊäòÂè†
    " marker    ‰ΩøÁî®Ê†áËÆ∞ËøõË°åÊäòÂè†, ÈªòËÆ§Ê†áËÆ∞ÊòØ {{{ Âíå }}}, ÂèØ‰ª•Ëá™ÂÆö‰πâ‰∏∫ `set foldmarker={,}`
    set foldmethod=indent
    set foldlevel=99
    " ‰ª£Á†ÅÊäòÂè†Ëá™ÂÆö‰πâÂø´Êç∑ÈîÆ <leader>zz
    nnoremap <space> za             " Áî®Á©∫Ê†ºÊù•ÂàáÊç¢ÊäòÂè†Áä∂ÊÄÅ
    let g:FoldMethod = 0
    map <leader>zz :call ToggleFold()<cr>
    fun! ToggleFold()
        if g:FoldMethod == 0
            exe "normal! zM"
            let g:FoldMethod = 1
        else
            exe "normal! zR"
            let g:FoldMethod = 0
        endif
    endfun

" }

" Áº©ËøõÈÖçÁΩÆ {

    set smartindent      " Ëá™Âä®Áº©Ëøõ
    set autoindent       " Ëá™Âä®ÂØπÈΩê

    " tab ÈîÆÂÆΩÂ∫¶‰∏∫4Á©∫Ê†º
    set tabstop=4
    " ÊØè‰∏ÄÊ¨°Áº©ËøõÂØπÂ∫îÁöÑÁ©∫Ê†ºÊï∞
    set shiftwidth=4
    " ÊåâÈÄÄÊ†ºÈîÆÂèØ‰ª•‰∏ÄÊ¨°Âà†Êéâ4‰∏™Á©∫Ê†º
    set softtabstop=4
    set smarttab
    " Â∞Ü tab Ëá™Âä®ËΩ¨ÂåñÊàêÁ©∫Ê†º (ÈúÄË¶ÅËæìÂÖ•ÁúüÊ≠£ÁöÑTabÈîÆÊó∂Ôºå‰ΩøÁî® Ctrl+V + Tab)
    set expandtab
    " Áº©ËøõÊó∂,ÂèñÊï¥
    set shiftround

    set cindent
    " ËØ¶ÁªÜÁöÑtabËÆæÁΩÆÔºöhttp://blog.chinaunix.net/uid-24774106-id-3396220.html
    set smarttab                 "Âú®Ë°åÈ¶ñÊåâTABÂ∞ÜÂä†ÂÖ•sw‰∏™Á©∫Ê†ºÔºåÂê¶ÂàôÂä†ÂÖ•ts‰∏™Á©∫Ê†º;ÊåâBackspaceÂèØ‰ª•Âà†Èô§4‰∏™Á©∫Ê†º

" }

" Á≤òË¥¥Ê®°Âºè {

    " Âú®ÊèíÂÖ•Ê®°Âºè‰∏ãÊåâ <F3> ËøõÂÖ•Á≤òË¥¥Ê®°Âºè,ËøôÊó∂ÂÄôÁ≤òË¥¥Â§çÂà∂ËøáÊù•ÁöÑ‰ª£Á†Å‰∏ç‰ºöËß¶ÂèëËá™Âä®Áº©Ëøõ
    set pastetoggle=<F3>
    " Á¶ªÂºÄÊèíÂÖ•Ê®°ÂºèÊó∂,ÂÖ≥Èó≠Á≤òË¥¥Ê®°Âºè
    autocmd InsertLeave * set nopaste

" }"

" Search {

    set incsearch                " ÂºÄÂêØÂÆûÊó∂ÊêúÁ¥¢ÂäüËÉΩ,Êü•ËØ¢Êó∂ÈùûÂ∏∏Êñπ‰æøÔºåÂ¶ÇË¶ÅÊü•ÊâæbookÂçïËØçÔºåÂΩìËæìÂÖ•Âà∞/bÊó∂Ôºå‰ºöËá™Âä®ÊâæÂà∞Á¨¨‰∏Ä‰∏™bÂºÄÂ§¥ÁöÑÂçïËØçÔºåÂΩìËæìÂÖ•Âà∞/boÊó∂Ôºå‰ºöËá™Âä®ÊâæÂà∞Á¨¨‰∏Ä‰∏™boÂºÄÂ§¥ÁöÑÂçïËØç
    set hlsearch                 " ÂºÄÂêØÈ´ò‰∫ÆÊòæÁ§∫ÁªìÊûú
    set nowrapscan               " ÊêúÁ¥¢Âà∞Êñá‰ª∂‰∏§Á´ØÊó∂‰∏çÈáçÊñ∞ÊêúÁ¥¢
    set ic                       " ÂøΩÁï•Â§ßÂ∞èÂÜôÊü•Êâæ
    " ÊêúÁ¥¢Ê≠£ÂàôÂåπÈÖçËßÑÂàôÊîπÂèò ËßÅÂ∏ÆÂä© :h magic
    set magic
    " ÊêúÁ¥¢Ê®°Âºè‰∏∫ÈªòËÆ§Êõ¥ÂÖàËøõÁöÑÊ≠£ÂàôËßÑÂàô
    " nnoremap / /\v
    " vnoremap / /\v

" }

" Statusline {
" ÂΩìÊ≤°Êúâ airline Êèí‰ª∂ÁöÑÊó∂ÂÄô‰ΩøÁî®ËøôÈáåÁöÑËá™ÂÆö‰πâ
if !&statusline

    " https://shapeshed.com/vim-statuslines/
    " http://vim.wikia.com/wiki/Writing_a_valid_statusline
    " http://learnvimscriptthehardway.stevelosh.com/chapters/17.html
    function! GitBranch()
      return system("git rev-parse --abbrev-ref HEAD 2>/dev/null | tr -d '\n'")
    endfunction
    function! StatuslineGit()
      let l:branchname = GitBranch()
      return strlen(l:branchname) > 0?'  '.l:branchname.' ':''
    endfunction
    set statusline=
    set statusline+=%#PmenuSel#                 " change background color
    " set statusline+=[%n]                        " buffer num
    " set statusline+=%{StatuslineGit()}
    set statusline+=%#LineNr#                   " change background color
    set statusline+=\ %f                        " file name
    " set statusline+=\ %.20F                     " file path, length limit 20%
    set statusline+=%m\                         " check modify status
    set statusline+=%=                          " align right
    set statusline+=%#CursorColumn#
    set statusline+=\ %y
    set statusline+=\ %{&fileencoding?&fileencoding:&encoding}
    set statusline+=\[%{&fileformat}\]          " fileformat
    set statusline+=\ %l/%L:%c
    set statusline+=\ %p%%
    set statusline+=\                           " space at end

endif
" }

" => Wild Ignore {

    " ÂøΩÁï•Ëøô‰∫õÊâ©Â±ïÊñá‰ª∂

    " Disable output and VCS files
    set wildignore+=*.rbc,*.rbo,*.gem,.git,.svn

    " Disable image files
    set wildignore+=*.psd,*.png,*.jpg,*.gif,*.jpeg

    " Disable archive files
    set wildignore+=*.zip,*.tar.gz,*.tar.bz2,*.rar,*.tar.xz

    " Ignore bundler and sass cache
    set wildignore+=*/vendor/gems/*,*/vendor/cache/*,*/.bundle/*,*/.sass-cache/*

    " Disable temp and backup files
    set wildignore+=*.sw?,*~,._*,*.un~

    " WP Language files
    set wildignore+=*.pot,*.po,*.mo

    " Fonts and such
    set wildignore+=*.eot,*.eol,*.ttf,*.otf,*.afm,*.ffil,*.fon,*.pfm,*.pfb,*.woff,*.svg,*.std,*.pro,*.xsf

    set wildignore+=*.aux,*.out,*.toc " LaTeX intermediate files
    set wildignore+=*.so,*.out,*.o,*.obj,*.exe,*.dll,*.manifest " compiled object files
    set wildignore+=*.luac " Lua byte code
    set wildignore+=*.pyc " Python byte code
    set wildignore+=*.class" Python byte code
    set wildignore+=*.spl " compiled spelling word lists
    set wildignore+=*/tmp/*,.DS_Store  " MacOSX/Linux

" }

" }
" Scene Setting {

" ManPage {
    " manpageview phpfunctionname.php
    " ÂèØ‰ª•‰ΩøÁî®Âø´Êç∑ÈîÆKÊü•ËØ¢
    " ËØ¥ÊòéÔºåÊØîÂ¶Ç‰Ω†Âú®centosÈáåÈù¢Ë£Ö‰∫Üman-pagesÔºåÂΩì‰Ω†Áî®KÊü•ËØ¢ÁöÑÊó∂ÂÄôÔºåËá™Âä®‰ºöÂºπÂá∫man ‰Ω†ÂÖâÊ†á‰∏ãÈù¢ÁöÑËØç
    " manpageview Êõø‰ª£‰∫ÜÊèí‰ª∂pydoc.vim
    "
" }

" Markdown {

    " Instant Preview Markdown
    let g:instant_markdown_autostart = 0
    map <leader>rp :InstantMarkdownPreview<CR>

    let tlist_markdown_settings = 'markdown;c:content;f:figures;t:tables;h:headlines'
    " au BufRead,BufNewFile *.{md,mdown,mkd,mkdn,markdown,mdwn} set ft=markdown
    " au BufRead,BufNewFile *.{md,mdown,mkd,mkdn,markdown,mdwn} set iskeyword+=[
    " au BufRead,BufNewFile *.{md,mdown,mkd,mkdn,markdown,mdwn} set iskeyword-=_

    " au BufRead,BufNewFile *.{md,mdown,mkd,mkdn,markdown,mdwn} set conceallevel=2

    " au FileType markdown,MARKDOWN  set iskeyword+=[
    " au FileType markdown,MARKDOWN  set iskeyword-=_
    " au BufWritePre *{md,mdown,mkd,mkdn,markdown,mdwn} call RemoveTrailingWhitespace()

    " :Toch Ê∞¥Âπ≥Â∫ïÈÉ®Ê∑ªÂä† TocÔºå Ëøô‰∏™ÂèØ‰ª•Â§çÂà∂Âà∞Ê≠£ÊñáÈáåÈù¢
    " ]]    go to next header.
    " [[    go to previous header. Contrast with ]c.
" }

" Python {
    " python highlight
    let python_highlight_all = 1
    let b:python_version_2 = 1
    let g:python_version_2 = 1

    au BufRead *.wsgi setl filetype=python

    au BufNewFile,BufRead *.py,*.pyw
        \ set tabstop=4 |
        \ set softtabstop=4 |
        \ set shiftwidth=4 |
        \ set textwidth=79 |
        \ set expandtab |
        \ set autoindent |
        \ set fileformat=unix |

    " Use UNIX (\n) line endings.
    au BufNewFile *.py,*.pyw,*.c,*.h set fileformat=unix

    " Display tabs at the beginning of a line in Python mode as bad.
    " au BufRead,BufNewFile *.py,*.pyw match BadWhitespace /^\t\+/
    " Make trailing whitespace be flagged as bad.
    " au BufRead,BufNewFile *.py,*.pyw,*.c,*.h match BadWhitespace /\s\+$/


    " ÊîØÊåÅVirtualenvËôöÊãüÁéØÂ¢É

    " ‰∏äÈù¢‚ÄúËΩ¨Âà∞ÂÆö‰πâ‚ÄùÂäüËÉΩÁöÑ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØÈªòËÆ§ÊÉÖÂÜµ‰∏ãVim‰∏çÁü•ÈÅìvirtualenvËôöÊãüÁéØÂ¢ÉÁöÑÊÉÖÂÜµÔºåÊâÄ‰ª•‰Ω†ÂøÖÈ°ªÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê∑ªÂä†‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºå‰ΩøÂæóVimÂíåYouCompleteMeËÉΩÂ§üÂèëÁé∞‰Ω†ÁöÑËôöÊãüÁéØÂ¢ÉÔºö

    " python with virtualenv support
    " py << EOF
    " import os
    " import sys
    " if 'VIRTUAL_ENV' in os.environ:
    "   project_base_dir = os.environ['VIRTUAL_ENV']
    "   activate_this = os.path.join(project_base_dir, 'bin/activate_this.py')
    "   execfile(activate_this, dict(__file__=activate_this))
    " EOF
    " ËøôÊÆµ‰ª£Á†Å‰ºöÂà§Êñ≠‰Ω†ÁõÆÂâçÊòØÂê¶Âú®ËôöÊãüÁéØÂ¢É‰∏≠ÁºñËæëÔºåÁÑ∂ÂêéÂàáÊç¢Âà∞Áõ∏Â∫îÁöÑËôöÊãüÁéØÂ¢ÉÔºåÂπ∂ËÆæÁΩÆÂ•Ω‰Ω†ÁöÑÁ≥ªÁªüË∑ØÂæÑÔºåÁ°Æ‰øùYouCompleteMeËÉΩÂ§üÊâæÂà∞Áõ∏Â∫îÁöÑsite packagesÊñá‰ª∂Â§π„ÄÇ
    " ‰∏äÈù¢ÁöÑ‰ª£Á†Å‰ºº‰πéÂ∑≤ÁªèË¢´‰∏ãÈù¢ÁöÑÊèí‰ª∂Êô∫ËÉΩËß£ ÂÜ≥
    " https://github.com/jmcantrell/vim-virtualenv
    " Â¶ÇÊûúÊúâ‰∏ÄÂ§©‰∏ÄÁõ¥‰ΩøÁî® python  ÂèØ‰ª•ËÄÉËôëÊää python ÊîæÂú®ÂçïÁã¨ÁöÑ‰∏Ä‰∏™Êñá‰ª∂ÈÖçÁΩÆ‰∏≠, ÂèÇËÄÉËøôÁØáÊñáÁ´†
    " https://segmentfault.com/a/1190000003962806
" }

" PHP {
    let g:phpcomplete_relax_static_constraint = 1
    let g:phpcomplete_complete_for_unknown_classes = 1
    let g:phpcomplete_search_tags_for_variables = 1
    let g:phpcomplete_mappings = {
        \ 'jump_to_def': ',g',
        \ }

    "Âè™ÊúâÂú®ÊòØPHPÊñá‰ª∂Êó∂ÔºåÊâçÂêØÁî®PHPË°•ÂÖ®
    function! AddPHPFuncList()
        set dictionary+=$HOME/.vim/vimfiles/resource/php-offical.dict
        set complete-=k complete+=k
    endfunction

    " Map <leader>el to error_log value
    " takes the whatever is under the cursor and wraps it in error_log( and
    " print_r( with parameter true and a label
    au FileType php nnoremap <leader>el ^vg_daerror_log( '<esc>pa=' . print_r( <esc>pa, true ) );<cr><esc>

    au FileType php call AddPHPFuncList()
    au FileType php setlocal omnifunc=syntaxcomplete#Complete
    au BufNewFile,BufRead *.phtml set filetype=php

    " set tags+= ~/.vim/vimfiles/resource/tags-php

    " autocmd FileType php setlocal omnifunc=phpcomplete#CompleteTags
    " Èô§‰∫Ü‰ΩøÁî®TabËøô‰∏™Ë°•ÂÖ®ÁöÑÊñπÂºèÔºåËøòÂèØ‰ª•‰ΩøÁî®Ctrl+xÔºåCtrl+oÊù•Ë°•ÂÖ®‰∏äÈù¢Êñá‰ª∂ÁöÑÂÜÖÁΩÆÂáΩÊï∞

    " function! RunPhpcs()
        " let l:filename=@%
        " let l:phpcs_output=system('phpcs --report=csv --standard=YMC '.l:filename)
        " let l:phpcs_list=split(l:phpcs_output, "\n")
        " unlet l:phpcs_list[0]
        " cexpr l:phpcs_list
        " cwindow
        " endfunction

        " set errorformat+=\"%f\"\\,%l\\,%c\\,%t%*[a-zA-Z]\\,\"%m\"
    " command! Phpcs execute RunPhpcs()
    " php debug
    let g:vdebug_keymap = {
    \    "run"               : "<F5>",
    \    "set_breakpoint"    : "<F9>",
    \    "run_to_cursor"     : "<F1>",
    \    "get_context"       : "<F2>",
    \    "detach"            : "<F7>",
    \    "step_over"         : "<F10>",
    \    "step_into"         : "<F11>",
    \    "step_out"          : '<leader><F11>',
    \    "close"             : '<leader><F5>',
    \    "eval_under_cursor" : "<Leader>ec",
    \    "eval_visual"       : "<Leader>ev",
    \}
    let g:vdebug_options = {
    \    "port"               : 9000,
    \    "server"             : 'localhost',
    \    "timeout"            : 20,
    \    "on_close"           : 'detach',
    \    "break_on_open"      : 0,
    \    "path_maps"          : {},
    \    "debug_window_level" : 0,
    \    "debug_file_level"   : 0,
    \    "debug_file"         : "",
    \    "watch_window_style" : 'expanded',
    \    "marker_default"     : '*',
    \    "marker_closed_tree" : '+',
    \    "marker_open_tree"   : '-'
    \}

    " Ë¶ÅËÆ©vimÊîØÊåÅphp/jsÁöÑÈîôËØØÊü•ËØ¢ÔºåÂÖàÂÆâË£ÖsyntasticÊèí‰ª∂
    " ÁÑ∂ÂêéÁî®phpÂØπÂ∫îÁöÑÁâàÊú¨pear install PHP_CodeSniffer-2.0.0a2
    " shellÊµãËØïÔºöphpcs index.php
    " phpcsÔºåtab 4‰∏™Á©∫Ê†ºÔºåÁºñÁ†ÅÂèÇËÄÉ‰ΩøÁî®CodeIgniterÈ£éÊ†º
    " let g:syntastic_phpcs_conf = "--tab-width=3 --standard=Zend"
    " let g:syntastic_phpcs_conf = "--tab-width=4 --standard=CodeIgniter"
    " ‰πüÂèØ‰ª•Âú®cli‰∏≠ÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§
    " phpcs --config-set default_standard Zend
    " Â¶ÇÊûúÊÄïË¢´phpcsÊèêÁ§∫ÁöÑÈîôËØØÂêìÂÄíÔºåÂèØ‰ª•ÊääZendÊîπÊàênone,ËøôÊ†∑Â∞±Âè™‰ºöÊèêÁ§∫‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÈîôËØØ
    "
    let g:phpqa_messdetector_ruleset = ''
    let g:phpqa_messdetector_cmd = '/usr/bin/phpmd'
    " Âú®ÊâìÂºÄÊñá‰ª∂ÁöÑÊó∂ÂÄôÊ£ÄÊü•
    let g:phpqa_messdetector_autorun = 0
" }

" RUBY {
    " ÈíàÂØπÈÉ®ÂàÜËØ≠Ë®ÄÂèñÊ∂àÊåáÂÆöÂ≠óÁ¨¶ÁöÑÂçïËØçÂ±ûÊÄß
    " au FileType ruby     set iskeyword+=!
    " au FileType ruby     set iskeyword+=?

    " ÂØπÈÉ®ÂàÜËØ≠Ë®ÄËÆæÁΩÆÂçïÁã¨ÁöÑÁº©Ëøõ
    " au FileType ruby,eruby set shiftwidth=2
    " au FileType ruby,eruby set tabstop=2

    " auto completed
    " let g:rubycomplete_buffer_loading = 1
    " let g:rubycomplete_classes_in_global = 1
    " let g:rubycomplete_rails = 1
    " autocmd FileType ruby compiler ruby
" }

" JavaScript & Node {

    " F         Ê†ºÂºèÂåñÂΩìÂâçÈ°µÈù¢ js,html,css. ÂèØÈÄâ‰∏≠Â±ÄÈÉ®Ê†ºÂºèÂåñ

    " au FileType javascript,coffee,slim,jade set shiftwidth=2
    " au FileType javascript,offee,slim,jade set tabstop=2

    " au BufRead,BufNewFile *.scss set filetype=scss
    " au BufRead,BufNewFile *.sass set filetype=scss
    " au BufRead,BufNewFile *.js set filetype=javascript syntax=jquery
    " au BufRead,BufNewFile *.less set filetype=css
    " au BufRead,BufNewFile *.coffee setl foldmethod=indent nofoldenable
    " au BufRead,BufNewFile *.coffee setl shiftwidth=2 expandtab

    au BufNewFile,BufRead *.js,*.html,*.css
        \ set tabstop=4 |
        \ set softtabstop=4 |
        \ set shiftwidth=4

    au FileType javascript set fdm=syntax

    " ignore Node and JS stuff
    set wildignore+=*/node_modules/*,*.min.js

" }

" C/C++ {

    " c/c++ÁéØÂ¢ÉÂºÄÂèëIDE
    " cÂºÄÂèë‰ªãÁªçÔºöhttp://blog.csdn.net/bokee/article/details/6633193
    " Ctags
    " inoremap  <c-]> <c-x><c-]> "ctags Ë°•ÂÖ®Âø´Êç∑ÈîÆ
    " Áî®ctrl+]ÂíåCtrl+tË∑≥ËΩ¨ÂÆö‰πâÂíåËøîÂõû
    nmap <silent><leader>mt :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q <cr><cr>:echo 'Generate Ctags Done'<cr>
    " nmap <leader>mt <ESC>:!ctags -R --languages=
    " set tags+=~/gitdb/rails/tags
    " ÁîüÊàêcscope
    " nmap <leader>gc :!cscope -Rbq -f cscope/cs.out <CR><CR>:echo 'generate cscope done'<cr>
    " cscopeÁöÑ‰ΩøÁî®
    " <leader>f
    " s: Find this C symbol
    " g: Find this definition
    " d: Find functions called by this function
    " c: Find functions calling this function
    " t: Find this text string
    " e: Find this egrep pattern
    " f: Find this file
    " i: Find files #including this file
    " ‰ΩøÁî®taglist <leader>tl
    " Âú®. -> :: Á≠âÂú∞ÊñπÂèØ‰ª•Ëá™Âä®Ë°•ÂÖ®

" }

" Other {
    " ÂØπÈÉ®ÂàÜËØ≠Ë®ÄËÆæÁΩÆÂçïÁã¨ÁöÑÁº©Ëøõ
    au FileType scala,clojure,lua,dart,sh set shiftwidth=2
    au FileType scala,clojure,lua,dart,sh set tabstop=2
    " ÈíàÂØπÈÉ®ÂàÜËØ≠Ë®ÄÂèñÊ∂àÊåáÂÆöÂ≠óÁ¨¶ÁöÑÂçïËØçÂ±ûÊÄß
    au FileType clojure  set iskeyword-=.
    au FileType clojure  set iskeyword-=>
    au FileType perl,php set iskeyword-=$

    au BufRead,BufNewFile *.applescript set filetype=applescript
    au BufRead,BufNewFile *.scpt set filetype=applescript

    " au BufReadPre *.txt,*.log,*.ini setlocal ft=txt

    " gg=G format for xml
    au FileType xml setlocal equalprg=xmllint\ --format\ --recover\ -\ 2>/dev/null

    " json
    au FileType json set fdm=syntax
" }

" }
" Shortcut {
" ,fl ÂèØ‰ª•Êü•ÂçïËØç

" marker ‰ΩøÁî®
" m 0~9 Ê†áËÆ∞Êñá‰ª∂
" ' 0~9 ÈöèÊó∂ÊâìÂºÄÊñá‰ª∂

" tips: ‰ªévimÊöÇÊó∂ÁöÑÂàáÊç¢Âà∞Console
" ÊöÇÂÅúvimÊñπÂºè:Ctrl+z, jobs, fg
" ‰ΩøÁî®vimÁöÑshÂëΩ‰ª§ÂêØÂä®Êñ∞console :sh
" ‰ΩøÁî®!bashÂêØÂä®‰∏Ä‰∏™console
" Áõ¥Êé•ÊâßË°å:!ÂëΩ‰ª§


" ,ig                        --ÊòæÁ§∫/ÂÖ≥Èó≠ÂØπÈΩêÁ∫ø
" 0 or ^ or $                --Ë∑≥Ëá≥ Ë°åÈ¶ñ or Á¨¨‰∏Ä‰∏™ÈùûÁ©∫Â≠óÁ¨¶ or Ë°åÂ∞æ
"

"
" [ Ctrl+D                   --Ë∑≥Ëá≥ÂΩìÂâçÂÖâÊ†áÊâÄÂú®ÂèòÈáèÁöÑÈ¶ñÊ¨°ÂÆö‰πâ‰ΩçÁΩÆ [‰ªéÊñá‰ª∂Â§¥ÈÉ®ÂºÄÂßã]
" [ Ctrl+I                   --Ë∑≥Ëá≥ÂΩìÂâçÂÖâÊ†áÊâÄÂú®ÂèòÈáèÁöÑÈ¶ñÊ¨°Âá∫Áé∞‰ΩçÁΩÆ [‰ªéÊñá‰ª∂Â§¥ÈÉ®ÂºÄÂßã]
" [ D                        --ÂàóÂá∫ÂΩìÂâçÂÖâÊ†áÊâÄÂú®ÂèòÈáèÁöÑÊâÄÊúâÂÆö‰πâ‰ΩçÁΩÆ [‰ªéÊñá‰ª∂Â§¥ÈÉ®ÂºÄÂßã]
" [ I                        --ÂàóÂá∫ÂΩìÂâçÂÖâÊ†áÊâÄÂú®ÂèòÈáèÁöÑÊâÄÊúâÂá∫Áé∞‰ΩçÁΩÆ [‰ªéÊñá‰ª∂Â§¥ÈÉ®ÂºÄÂßã]
"
" ---------- ÊñáÊú¨Êìç‰Ωú ----------
"
" dw de d0 d^ d$ dd          --Âà†Èô§
" cw ce c0 c^ c$ cc          --Âà†Èô§Âπ∂ËøõÂÖ•ÊèíÂÖ•Ê®°Âºè
" yw ye y0 y^ y$ yy          --Â§çÂà∂
" vw ve v0 v^ v$ vv          --ÈÄâ‰∏≠
"
" diÂàÜÈöîÁ¨¶                   --Âà†Èô§ÊåáÂÆöÂàÜÈöîÁ¨¶‰πãÈó¥ÁöÑÂÜÖÂÆπ [‰∏çÂåÖÊã¨ÂàÜÈöîÁ¨¶]
" ciÂàÜÈöîÁ¨¶                   --Âà†Èô§ÊåáÂÆöÂàÜÈöîÁ¨¶‰πãÈó¥ÁöÑÂÜÖÂÆπÂπ∂ËøõÂÖ•ÊèíÂÖ•Ê®°Âºè [‰∏çÂåÖÊã¨ÂàÜÈöîÁ¨¶]
" yiÂàÜÈöîÁ¨¶                   --Â§çÂà∂ÊåáÂÆöÂàÜÈöîÁ¨¶‰πãÈó¥ÁöÑÂÜÖÂÆπ [‰∏çÂåÖÊã¨ÂàÜÈöîÁ¨¶]
" viÂàÜÈöîÁ¨¶                   --ÈÄâ‰∏≠ÊåáÂÆöÂàÜÈöîÁ¨¶‰πãÈó¥ÁöÑÂÜÖÂÆπ [‰∏çÂåÖÊã¨ÂàÜÈöîÁ¨¶]
"
" daÂàÜÈöîÁ¨¶                   --Âà†Èô§ÊåáÂÆöÂàÜÈöîÁ¨¶‰πãÈó¥ÁöÑÂÜÖÂÆπ [ÂåÖÊã¨ÂàÜÈöîÁ¨¶]
" caÂàÜÈöîÁ¨¶                   --Âà†Èô§ÊåáÂÆöÂàÜÈöîÁ¨¶‰πãÈó¥ÁöÑÂÜÖÂÆπÂπ∂ËøõÂÖ•ÊèíÂÖ•Ê®°Âºè [ÂåÖÊã¨ÂàÜÈöîÁ¨¶]
" yaÂàÜÈöîÁ¨¶                   --Â§çÂà∂ÊåáÂÆöÂàÜÈöîÁ¨¶‰πãÈó¥ÁöÑÂÜÖÂÆπ [ÂåÖÊã¨ÂàÜÈöîÁ¨¶]
" vaÂàÜÈöîÁ¨¶                   --ÈÄâ‰∏≠ÊåáÂÆöÂàÜÈöîÁ¨¶‰πãÈó¥ÁöÑÂÜÖÂÆπ [ÂåÖÊã¨ÂàÜÈöîÁ¨¶]
"
" XiÂíåXaÈÉΩÂèØ‰ª•Âú®XÂêéÈù¢Âä†ÂÖ•‰∏Ä‰∏™Êï∞Â≠óÔºå‰ª•Êåá‰ª£ÊâÄÂ§ÑÁêÜÁöÑÊã¨Âè∑Â±ÇÊ¨°
" Â¶Ç d2i( ÊâßË°åÁöÑÊòØÂà†Èô§ÂΩìÂâçÂÖâÊ†áÂ§ñÂõ¥Á¨¨‰∫åÂ±ÇÊã¨Âè∑ÂÜÖÁöÑÊâÄÊúâÂÜÖÂÆπ
"
" dtÂ≠óÁ¨¶                     --Âà†Èô§Êú¨Ë°åÂÜÖÂÆπÔºåÁõ¥Âà∞ÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÊåáÂÆöÂ≠óÁ¨¶ [‰∏çÂåÖÊã¨ËØ•Â≠óÁ¨¶]
" ctÂ≠óÁ¨¶                     --Âà†Èô§Êú¨Ë°åÂÜÖÂÆπÔºåÁõ¥Âà∞ÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÊåáÂÆöÂ≠óÁ¨¶Âπ∂ËøõÂÖ•ÊèíÂÖ•Ê®°Âºè [‰∏çÂåÖÊã¨ËØ•Â≠óÁ¨¶]
" ytÂ≠óÁ¨¶                     --Â§çÂà∂Êú¨Ë°åÂÜÖÂÆπÔºåÁõ¥Âà∞ÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÊåáÂÆöÂ≠óÁ¨¶ [‰∏çÂåÖÊã¨ËØ•Â≠óÁ¨¶]
" vtÂ≠óÁ¨¶                     --ÈÄâ‰∏≠Êú¨Ë°åÂÜÖÂÆπÔºåÁõ¥Âà∞ÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÊåáÂÆöÂ≠óÁ¨¶ [‰∏çÂåÖÊã¨ËØ•Â≠óÁ¨¶]
"
" dfÂ≠óÁ¨¶                     --Âà†Èô§Êú¨Ë°åÂÜÖÂÆπÔºåÁõ¥Âà∞ÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÊåáÂÆöÂ≠óÁ¨¶ [ÂåÖÊã¨ËØ•Â≠óÁ¨¶]
" cfÂ≠óÁ¨¶                     --Âà†Èô§Êú¨Ë°åÂÜÖÂÆπÔºåÁõ¥Âà∞ÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÊåáÂÆöÂ≠óÁ¨¶Âπ∂ËøõÂÖ•ÊèíÂÖ•Ê®°Âºè [ÂåÖÊã¨ËØ•Â≠óÁ¨¶]
" yfÂ≠óÁ¨¶                     --Â§çÂà∂Êú¨Ë°åÂÜÖÂÆπÔºåÁõ¥Âà∞ÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÊåáÂÆöÂ≠óÁ¨¶ [ÂåÖÊã¨ËØ•Â≠óÁ¨¶]
" vfÂ≠óÁ¨¶                     --ÈÄâ‰∏≠Êú¨Ë°åÂÜÖÂÆπÔºåÁõ¥Âà∞ÈÅáÂà∞Á¨¨‰∏Ä‰∏™ÊåáÂÆöÂ≠óÁ¨¶ [ÂåÖÊã¨ËØ•Â≠óÁ¨¶]
"
" XT Âíå XF ÊòØ Xt/Xf ÁöÑÂèçÊñπÂêëÊìç‰Ωú
"
" ---------- ‰æøÊç∑Êìç‰Ωú ----------
"
" Ctrl + A                   --Â∞ÜÂΩìÂâçÂÖâÊ†áÊâÄÂú®Êï∞Â≠óËá™Â¢û1        [‰ªÖÊôÆÈÄöÊ®°ÂºèÂèØÁî®]
" Ctrl + X                   --Â∞ÜÂΩìÂâçÂÖâÊ†áÊâÄÂú®Êï∞Â≠óËá™Âáè1        [‰ªÖÊôÆÈÄöÊ®°ÂºèÂèØÁî®]
" mÂ≠óÁ¨¶       and 'Â≠óÁ¨¶      --Ê†áËÆ∞‰ΩçÁΩÆ and Ë∑≥ËΩ¨Âà∞Ê†áËÆ∞‰ΩçÁΩÆ
" qÂ≠óÁ¨¶ xxx q and @Â≠óÁ¨¶      --ÂΩïÂà∂ÂÆè   and ÊâßË°åÂÆè



" Ctrl + h/j/k/l ÁßªÂä®ÂÖâÊ†áÂà∞‰∏ä‰∏ãÂ∑¶Âè≥‰ΩçÁΩÆ
" Ctrl + H/J/K/L ÁßªÂä®Á™óÂè£Âà∞‰∏ä‰∏ãÂ∑¶Âè≥‰ΩçÁΩÆ
" '+1~9 ‰∏äÊ¨°ÊâìÂºÄÁöÑÊñá‰ª∂
" m+1~9 mark 1~9Êñá‰ª∂ÁöÑ‰ΩçÁΩÆ
" :vert diffsplit main.c
" dp : diffput,ÊääÂ¢ûÂä†ÁöÑÈÉ®ÂàÜÊîæÂà∞Âè¶Â§ñ‰∏ÄËæπ


" -------- Ëá™ÂÆö‰πâÂø´Êç∑ÈîÆ --------

" Ctrl + H            ÂÖâÊ†áÁßªÂΩìÂâçË°åË°åÈ¶ñ
imap <c-h> <ESC>I

" Ctrl + J            ÂÖâÊ†áÁßª‰∏ã‰∏ÄË°åË°åÈ¶ñ
imap <c-j> <ESC><Down>I

" Ctrl + K            ÂÖâÊ†áÁßª‰∏ä‰∏ÄË°åË°åÂ∞æ
imap <c-k> <ESC><Up>A

" Ctrl + L            ÂÖâÊ†áÁßªÂΩìÂâçË°åË°åÂ∞æ
imap <c-l> <ESC>A

" Alt  + H            ÂÖâÊ†áÂ∑¶Áßª‰∏ÄÊ†º
imap <m-h> <Left>

" Alt  + J            ÂÖâÊ†á‰∏ãÁßª‰∏ÄÊ†º
imap <m-j> <Down>

" Alt  + K            ÂÖâÊ†á‰∏äÁßª‰∏ÄÊ†º
imap <m-k> <Up>

" Alt  + L            ÂÖâÊ†áÂè≥Áßª‰∏ÄÊ†º
imap <m-l> <Right>

" \c                  Â§çÂà∂Ëá≥ÂÖ¨ÂÖ±Ââ™Ë¥¥Êùø
vmap <leader>c "+y

" \a                  Â§çÂà∂ÊâÄÊúâËá≥ÂÖ¨ÂÖ±Ââ™Ë¥¥Êùø
nmap <leader>a <ESC>ggVG"+y<ESC>

" \v                  ‰ªéÂÖ¨ÂÖ±Ââ™Ë¥¥ÊùøÁ≤òË¥¥
imap <leader>v <ESC>"+p
nmap <leader>v "+p
vmap <leader>v "+p

" \bb                 Êåâ=Âè∑ÂØπÈΩê‰ª£Á†Å [TabularÊèí‰ª∂]
nmap <leader>bb :Tabularize /=<CR>

" \ba                 ‰∏çË¶ÅÊää = ÊîæÂÖ•ÊéíÂàó
nmap <leader>bb :Tabularize /=\zs<CR>

" \bn                 Ëá™ÂÆö‰πâÂØπÈΩê    [TabularÊèí‰ª∂]
nmap <leader>bn :Tabularize /

" \16                 ÂçÅÂÖ≠ËøõÂà∂Ê†ºÂºèÊü•Áúã
nmap <leader>16 <ESC>:%!xxd<ESC>

" \r16                ËøîÂõûÊôÆÈÄöÊ†ºÂºè
nmap <leader>r16 <ESC>:%!xxd -r<ESC>

" \r<cr>                 ‰∏ÄÈîÆÂéªÈô§ÊâÄÊúâÂ∞æÈÉ®Á©∫ÁôΩ trailing
" imap <leader>rb <ESC>:let _s=@/<Bar>:%s/\s\+$//e<Bar>:let @/=_s<Bar>:nohl<CR>
nmap <leader>r<cr> <ESC>:let _s=@/<Bar>:%s/\s\+$//e<Bar>:let @/=_s<Bar>:nohl<CR>
vmap <leader>r<cr> <ESC>:let _s=@/<Bar>:%s/\s\+$//e<Bar>:let @/=_s<Bar>:nohl<CR>

" \rt                 ‰∏ÄÈîÆÊõøÊç¢ÂÖ®ÈÉ®Tab‰∏∫Á©∫Ê†º
" imap <leader>rt <ESC>:call RemoveTabs()<CR>
nmap <leader>rt :call RemoveTabs()<CR>
vmap <leader>rt <ESC>:call RemoveTabs()<CR>

" \rl
nmap <leader>rl :so ~/.vim/vimrc<CR>

" \th                 ‰∏ÄÈîÆÁîüÊàê‰∏éÂΩìÂâçÁºñËæëÊñá‰ª∂ÂêåÂêçÁöÑHTMLÊñá‰ª∂ [‰∏çËæìÂá∫Ë°åÂè∑]
" imap <leader>th <ESC>:set nonumber<CR>:set norelativenumber<CR><ESC>:TOhtml<CR><ESC>:w %:r.html<CR><ESC>:q<CR>:set number<CR>:set relativenumber<CR>
nmap <leader>th <ESC>:set nonumber<CR>:set norelativenumber<CR><ESC>:TOhtml<CR><ESC>:w %:r.html<CR><ESC>:q<CR>:set number<CR>:set relativenumber<CR>
vmap <leader>th <ESC>:set nonumber<CR>:set norelativenumber<CR><ESC>:TOhtml<CR><ESC>:w %:r.html<CR><ESC>:q<CR>:set number<CR>:set relativenumber<CR>

" move lines up or down (command - D)
nmap <m-j> mz:m+<cr>`z
nmap <m-k> mz:m-2<cr>`z
vmap <m-j> :m'>+<cr>`<my`>mzgv`yo`z
vmap <m-k> :m'<-2<cr>`>my`<mzgv`yo`z

" Tab move lines left or right (c-Ctrl,s-Shift)
"nmap    <c-tab>     v>
"nmap    <s-tab>     v<
"vmap    <c-tab>     >gv
"vmap    <s-tab>     <gv

:nmap <c-tab> :tabn<CR>
:map <c-tab> :tabn<CR>
imap <c-tab> <Esc>:tabn<CR>i

:nmap <c-s-tab> :tabp<CR>
:map <c-s-tab> :tabp<CR>
imap <c-s-tab> <Esc>:tabp<CR>i

" ÂÖ≥‰∫éÁºìÂÜ≤Âå∫ÔºåÂèØ‰ª•Áî® bd Âà†Èô§ÂΩìÂâçÁºìÂÜ≤Âå∫
" ls! ÊòæÁ§∫ÂΩìÂâçÁºìÂÜ≤Âå∫ÂàóË°®ÔºåÁÑ∂Âêé :b2 ÈÄâÊã©ÁºìÂÜ≤Âå∫
" ÂÖ≥Èó≠ÊâÄÊúâÁºìÂÜ≤ÔºåÂè™‰øùÁïôÂΩìÂâç :w | %bd | e#

" ‰∏ã‰∏Ä‰∏™ÁºìÂÜ≤Âå∫
:nmap <leader>n :bn<CR>
:map <leader>n :bn<CR>
imap <leader>n <Esc>:bp<CR>i
:nmap <c-F3> :bn<CR>
:map <c-F3> :bn<CR>
imap <c-F3> <Esc>:bp<CR>i


" ‰∏ä‰∏Ä‰∏™ÁºìÂÜ≤Âå∫
:nmap <leader>p :bp<CR>
:map <leader>p :bp<CR>
imap <leader>p <Esc>:bp<CR>i
:nmap <c-F2> :bp<CR>
:map <c-F2> :bp<CR>
imap <c-F2> <Esc>:bp<CR>i

" ‰∏ä‰∏ÄÊ¨°ÊâìÂºÄÁöÑÁºìÂÜ≤Âå∫, Áî® Ctrl+6 ‰πüÂèØ‰ª•ÂÅöÂà∞
" nmap <leader>k :b#<CR>
" Áî® ctrlp Êèí‰ª∂Ôºå <leader><space> ÈªòËÆ§ÈÄâ‰∏≠ÁöÑÂ∞±ÊòØ‰∏äÊ¨°ÊâìÂºÄÁöÑ buffer

" \R         ‰∏ÄÈîÆ‰øùÂ≠ò„ÄÅÁºñËØë„ÄÅËøêË°å
imap <leader>R <ESC>:call Compile_Run_Code()<CR>
nmap <leader>R :call Compile_Run_Code()<CR>
vmap <leader>R <ESC>:call Compile_Run_Code()<CR>

" \rsl       ÊâßË°åÈÄâ‰∏≠Ë°åÂëΩ‰ª§
" run the select line in bash
vmap <leader>rsl <esc>:'<,'>:w !sh <CR>
" run the select line output result
vmap <leader>rso <esc>:'<,'>!sh <CR>
" FYI: omitting :w will replace the selection with the command's output.

" \ml        add modeline, display like this: " vim: set ts=4 sw=4 tw=78 et :
nnoremap <silent> <Leader>ml :call AppendModeline()<CR>

" tabs
map <leader>tn :tabnew<cr>
map <leader>te :tabedit
" map <leader>tc :tabclose<cr>
map <leader>tm :tabmove

" Line(s) move up/down
nnoremap <silent> <C-k>  :m-2<CR>==
nnoremap <silent> <C-j>  :m+<CR>==
xnoremap <silent> <C-k>  :m'<-2<CR>gv=gv
xnoremap <silent> <C-j>  :m'>+<CR>gv=gv

nnoremap <leader><F4> :set undofile!<CR>
imap <leader><F4>     :set undofile!<CR>

" ÂàáÊç¢Á™óÂè£ÂÖâÊ†á
" switch window
nnoremap <C-h> <C-w>h
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-l> <C-w>l
"nnoremap <leader>w <C-W>w

nnoremap <silent> <Leader>ml :call AppendModeline()<CR>

" map j to gj and k to gk, so line navigation ignores line wrap
nnoremap j gj
nnoremap k gk
vmap j gj
vmap k gk

" F4 Êç¢Ë°åÂºÄÂÖ≥
nnoremap <F4> :set wrap! wrap?<CR>

" F5 ÊòæÁ§∫ÂèØÊâìÂç∞Â≠óÁ¨¶ÂºÄÂÖ≥
nnoremap <F5> :set list! list?<CR>

" ÊªöÂä®Â±èÂπï‰∏∫2Ë°å
nnoremap <C-e> 2<C-e>
nnoremap <C-y> 2<C-y>

" ÈÄÄÂá∫ÊâÄÊúâÁ™óÂè£
nnoremap <leader>q :qa<CR>

" ‰øùÂ≠òÂπ∂ÈÄÄÂá∫ÂΩìÂâçÁºñËæëÊñá‰ª∂
nnoremap <leader>x :x<CR>

" set tab 2
nnoremap <leader>tt :call Tab2()<CR>
" set tab 4
nnoremap <leader>t4 :call Tab4()<CR>

" ‰ΩøÁî® xcopy Êã∑Ë¥ùÊï∞ÊçÆÂà∞Ëá™Â∑±ÁöÑ‰∫ëÁ≤òË¥¥Êùø
nnoremap <leader>C :call CopyToCloud()<CR>
vmap <leader>C :call CopySelectedToCloud() <CR>
" ==ÂàõÂª∫ Tags===
"
map <F12> :call Do_CsTag()<CR>
nmap <C-@>s :cs find s <C-R>=expand("<cword>")<CR><CR>:copen<CR>
nmap <C-@>g :cs find g <C-R>=expand("<cword>")<CR><CR>
nmap <C-@>c :cs find c <C-R>=expand("<cword>")<CR><CR>:copen<CR>
nmap <C-@>t :cs find t <C-R>=expand("<cword>")<CR><CR>:copen<CR>
nmap <C-@>e :cs find e <C-R>=expand("<cword>")<CR><CR>:copen<CR>
nmap <C-@>f :cs find f <C-R>=expand("<cfile>")<CR><CR>:copen<CR>
nmap <C-@>i :cs find i ^<C-R>=expand("<cfile>")<CR>$<CR>:copen<CR>
nmap <C-@>d :cs find d <C-R>=expand("<cword>")<CR><CR>:copen<CR>

" ## Command

" Save a file that requires sudoing even
command! Sw w !sudo tee % > /dev/null
" Show difference between modified buffer and original file
command! DiffSaved call s:DiffWithSaved()

" ÁªôÈÄâ‰∏≠Ë°åÊ∑ªÂä†Ë°åÂè∑
map <silent> <leader>anu :%s/^/\=line(".")." "/g<cr>
vmap <silent> <leader>anu o<esc>:call SetCurLineNum()<cr>gv:s/^/\=AddLineNum()." "/<cr>



" }
" Notes {

    " Check runtime message
    " vim -V9myVim.log
    " last error message
    " :messages
    " help g<

    " ÂèòÈáè
    " Êü•ÁúãËÆæÁΩÆÁöÑÂÄº
    " echo &statusline
    " Êü•ÁúãËÆæÁΩÆÁöÑÈîÆ‰∏éÂÄº
    " set statusline?

    " ÊòæÁ§∫ÂΩìÂâçÂÆö‰πâÁöÑÂèòÈáèÁõ¥Êé•ËæìÂÖ•:
    " :let

    " :exe "normal! " . (winwidth(0)-3) . "aa\<Esc>2a\<C-V>u3042")
    "
    " repeat Â≠óÁ¨¶‰∏≤
    " exec 'map <F2> :silent! let g:g="'.repeat('foobar ',200).'"<cr>'

" it can be changed on the fly with:
" :let g:vim_markdown_folding_level = 1
" :edit

" ÁºñËæë‰∫åËøõÂà∂Êñá‰ª∂
" vim -b file     %!xxd ÂàáÊç¢‰∏∫ÂçÅÂÖ≠ËøõÂà∂

" ÊääÁï∂ÂâçÊñá‰ª∂Âæ©Âà∂‰∏Ä‰ªΩ, ÂÖ∂ÂæåÁ∂¥ÂêçÁÇ∫A.txt
"map <silent> <leader>no :A.txt<esc>

" Áî®Ctrl+v TabÂèØ‰ª•‰∫ßÁîüÂéüÁîüÁöÑTab
" :e $m<tab> Ëá™Âä®Êâ©Â±ïÂà∞:e $MYVIMRC ÁÑ∂ÂêéÊâìÂºÄvimrc
"
" Â∞ëÁî®
" ga ËΩ¨Êç¢ÂÖâÊ†á‰∏ãÁöÑÂÜÖÂÆπ‰∏∫Â§öËøõÂà∂
" Á¢∞Âà∞‰∏çËÉΩËæìÂÖ•*Âè∑ÈîÆÔºåÂÖàÊåâCtrl+vÔºåÂÜçËæìÂÖ•ÊÉ≥Ë¶ÅËæìÂÖ•ÁöÑÁâπÊÆäÁ¨¶Âè∑
" gCtrl+g ÁªüËÆ°Â≠óÊï∞
" Ctrl+x, Ctrl+f Ë°•ÂÖ®ÂΩìÂâçË¶ÅËæìÂÖ•ÁöÑË∑ØÂæÑ

" tabn/tabp ÂàáÊç¢tab
" tabnew ÂàõÂª∫Êñ∞Á™óÂè£
" :retab ÂØπÂΩìÂâçÊñáÊ°£ÈáçÊñ∞ÊõøÊç¢tab‰∏∫Á©∫Ê†º
" :set notextmode  ÂéªÊéâ^MËøô‰∏™Á¨¶Âè∑
" :set paste  Ëøô‰∏™ÂèØ‰ª•Ëß£ÂÜ≥Âú®linux‰∏ãÈù¢Êúâ‰∫õÂ≠óÊØç‰ºöË¢´ÊâßË°å nopaste pastetoggle

" ÂéªÊéâBOM
" set nobomb; set fileencoding=utf8; w

" vim sessions
" :mks ~/.vim/sessions/foo.vim
" :source ~/.vim/session/foo.vim



" :r! {command}   insert the standard output of {command} below the cursor
" ga              show ascii value of character under cursor in decimal, hex, and octal
" :bdelete 3      Êää‰∏Ä‰∏™ÁºìÂÜ≤Âå∫‰ªéÂàóË°®‰∏≠ÂéªÈô§
" :bwipe          Êää‰∏Ä‰∏™ÁºìÂÜ≤Âå∫‰ªéÂàóË°®‰∏≠ÂΩªÂ∫ïÂéªÈô§
" :highlight      Êü•ÁúãÈ´ò‰∫Æ‰ª£Âè∑



" ==== Regex ====
" Â≠óÁ¨¶Êï∞
" :%s/./&/gn<cr>
" ÂçïËØçÊï∞
" :%s/\i\+/&/gn<cr>

" :%s/\r//g<CR>  " ‰∏ÄÈîÆÊõøÊç¢ÁâπÊÆäÂ≠óÁ¨¶ ^M
" Áõ∏ÂêåÂäüËÉΩ :set notextmode



" === ÂáΩÊï∞Â≠¶‰π† ===
" Êõ¥Â§öÂèØ‰ª•ÁúãÂâçÈù¢ function ÁâáÊÆµ
" function CloseBuffer()
"   exe 'normal! :w | %bd | e#'
" endfunction
" nmap <Tab> :call CloseBuffer()<CR>
" nnoremap ÈáåÁ¨¨‰∏Ä‰∏™ n ‰ª£Ë°® normal modeÔºåÂêéÈù¢ÁöÑ noremap ‰ª£Ë°®‰∏çË¶ÅÈáçÂ§çÊò†Â∞ÑÔºåËøôÊòØÈÅøÂÖç‰∏Ä‰∏™ÊåâÈîÆÂêåÊó∂Êò†Â∞ÑÂ§ö‰∏™Âä®‰ΩúÁî®ÁöÑ
"
" Áî®‰∏§‰∏™<CR>ÂèØ‰ª•ÈöêËóèÊâßË°åÂëΩ‰ª§ÂêéÂá∫Áé∞ÁöÑÊèêÁ§∫‰ø°ÊÅØ"
" map F :call FormatCode() <CR><CR>
" map <silent>F ‰πüÂèØ‰ª•ÈöêËóè
" map F :%s/{/{\r/g <CR> :%s/}/}\r/g <CR>  :%s/;/;\r/g <CR> gg=G

" }
" Locals {

    let g:snips_author = 'yantze'
    let g:snips_email  = 'ivastiny@gmail.com'
    let g:snips_info   = 'https://vastiny.com'

    " For neovim python support
    let g:python3_host_prog = '/Users/yantze/.pyenv/shims/python3'

    if filereadable(expand("~/.vimrc_local"))
        source ~/.vimrc_local
    endif

    " ‰∏ãÈù¢Ê†ºÂºèÁöÑÊñá‰ª∂ÂΩì‰Ωú zip ÂåÖÊâìÂºÄ
    autocmd BufReadCmd *.xmind,*.crx,*.apk,*.whl,*.egg  call zip#Browse(expand("<amatch>"))

    " Âú® Windows ÈáåÈù¢ÊîπÂèòÁºñÁ†Å
    " autocmd CmdwinEnter    * fenc=cp936

    " ÁïåÈù¢Áõ∏ÂÖ≥ÁöÑÂø´Êç∑ÈîÆ‰ª• ,w ÂºÄÂ§¥
" }

" vim: set ts=4 sw=4 tw=0 et fdm=marker foldmarker={,} foldlevel=0 foldenable foldlevelstart=99 :
